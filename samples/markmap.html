<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.3-web.2/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.16.3-web.2/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.3-web.2/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:O,mm:h}=window,I=new O.Toolbar;I.attach(h);const $=I.render();$.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append($)})})()</script><script>((r,y,f,o)=>{const w=r();window.mm=w.Markmap.create("svg#mindmap",(y||w.deriveOptions)(o),f)})(()=>window.markmap,null,{"content":"Building a RAG with Python","children":[{"content":"<strong>Prepare Your Data</strong>","children":[{"content":"Collect and organize documents","children":[],"payload":{"lines":"3,4"}},{"content":"Store PDFs in a project directory folder","children":[],"payload":{"lines":"4,5"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os\npdf_files = [f <span class=\"hljs-keyword\">for</span> f <span class=\"hljs-keyword\">in</span> os.listdir(<span class=\"hljs-string\">'/path/to/project/directory/'</span>) <span class=\"hljs-keyword\">if</span> f.endswith(<span class=\"hljs-string\">'.pdf'</span>)]\n<span class=\"hljs-built_in\">print</span>(pdf_files)\n</code></pre>","children":[],"payload":{"lines":"5,11"}}],"payload":{"lines":"2,11"}},{"content":"<strong>Install Necessary Libraries</strong>","children":[{"content":"Install Python libraries (e.g., Langchain)","children":[],"payload":{"lines":"12,13"}},{"content":"Update other project-specific dependencies","children":[],"payload":{"lines":"13,14"}},{"content":"Code:<pre><code class=\"language-bash\">pip install langchain\npip install --upgrade some-other-dependency\n</code></pre>","children":[],"payload":{"lines":"14,19"}}],"payload":{"lines":"11,19"}},{"content":"<strong>Load and Process Documents</strong>","children":[{"content":"Use a suitable document loader for PDFs","children":[],"payload":{"lines":"20,21"}},{"content":"Split documents into manageable text chunks","children":[],"payload":{"lines":"21,22"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> PyPDF2 <span class=\"hljs-keyword\">import</span> PdfReader\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_and_split_pdf</span>(<span class=\"hljs-params\">pdf_path</span>):\n    reader = PdfReader(pdf_path)\n    text_chunks = [page.extract_text() <span class=\"hljs-keyword\">for</span> page <span class=\"hljs-keyword\">in</span> reader.pages]\n    <span class=\"hljs-keyword\">return</span> text_chunks\ndocument_chunks = load_and_split_pdf(<span class=\"hljs-string\">'/path/to/file.pdf'</span>)\n</code></pre>","children":[],"payload":{"lines":"22,31"}}],"payload":{"lines":"19,31"}},{"content":"<strong>Create and Manage Embeddings</strong>","children":[{"content":"Develop a function for returning an embedding function","children":[],"payload":{"lines":"32,33"}},{"content":"Choose an embedding method (AWS Bedrock, Ollama, etc.)","children":[],"payload":{"lines":"33,34"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> sentence_transformers <span class=\"hljs-keyword\">import</span> SentenceTransformer\nmodel = SentenceTransformer(<span class=\"hljs-string\">'all-MiniLM-L6-v2'</span>)\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_embeddings</span>(<span class=\"hljs-params\">text_chunks</span>):\n    <span class=\"hljs-keyword\">return</span> model.encode(text_chunks)\nembeddings = get_embeddings([<span class=\"hljs-string\">\"Here is some text\"</span>, <span class=\"hljs-string\">\"Another piece of text\"</span>])\n</code></pre>","children":[],"payload":{"lines":"34,42"}}],"payload":{"lines":"31,42"}},{"content":"<strong>Build or Update the Vector Database</strong>","children":[{"content":"Initialize a vector database (e.g., ChromaDB)","children":[],"payload":{"lines":"43,44"}},{"content":"Create unique IDs for text chunks","children":[],"payload":{"lines":"44,45"}},{"content":"Manage database entries efficiently","children":[],"payload":{"lines":"45,46"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> chroma\ndb = chroma.ChromaDB(<span class=\"hljs-string\">'./vector_db'</span>)\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">add_to_database</span>(<span class=\"hljs-params\">text_id, embedding</span>):\n    db.add_vector(text_id, embedding)\n<span class=\"hljs-keyword\">for</span> idx, embedding <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">enumerate</span>(embeddings):\n    add_to_database(<span class=\"hljs-string\">f'text_chunk_<span class=\"hljs-subst\">{idx}</span>'</span>, embedding)\n</code></pre>","children":[],"payload":{"lines":"46,55"}}],"payload":{"lines":"42,55"}},{"content":"<strong>Query Processing</strong>","children":[{"content":"Convert queries into embeddings","children":[],"payload":{"lines":"56,57"}},{"content":"Retrieve relevant text chunks based on query embedding","children":[],"payload":{"lines":"57,58"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_query</span>(<span class=\"hljs-params\">query</span>):\n    query_embedding = model.encode([query])\n    closest_ids = db.search(query_embedding, top_k=<span class=\"hljs-number\">3</span>)\n    <span class=\"hljs-keyword\">return</span> closest_ids\nrelevant_text_ids = process_query(<span class=\"hljs-string\">\"example search query\"</span>)\n</code></pre>","children":[],"payload":{"lines":"58,66"}}],"payload":{"lines":"55,66"}},{"content":"<strong>Generate Responses</strong>","children":[{"content":"Use a local or remote LLM for response generation","children":[],"payload":{"lines":"67,68"}},{"content":"Ensure responses are contextually appropriate","children":[],"payload":{"lines":"68,69"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> langchain.llms <span class=\"hljs-keyword\">import</span> OpenAI\nllm = OpenAI(api_key=<span class=\"hljs-string\">'your_openai_api_key'</span>)\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_response</span>(<span class=\"hljs-params\">prompt</span>):\n    response = llm.complete(prompt)\n    <span class=\"hljs-keyword\">return</span> response\nresponse = generate_response(<span class=\"hljs-string\">\"based on retrieved context here\"</span>)\n</code></pre>","children":[],"payload":{"lines":"69,78"}}],"payload":{"lines":"66,78"}},{"content":"<strong>Testing and Evaluation</strong>","children":[{"content":"Implement unit tests","children":[],"payload":{"lines":"79,80"}},{"content":"Use an LLM for response validation","children":[],"payload":{"lines":"80,81"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> unittest\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TestRAGSystem</span>(unittest.TestCase):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_query_response</span>(<span class=\"hljs-params\">self</span>):\n        ids = process_query(<span class=\"hljs-string\">\"test query\"</span>)\n        response = generate_response(<span class=\"hljs-string\">\"context from test query\"</span>)\n        self.assertIn(<span class=\"hljs-string\">\"expected keyword or response\"</span>, response)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:\n    unittest.main()\n</code></pre>","children":[],"payload":{"lines":"81,92"}}],"payload":{"lines":"78,92"}},{"content":"<strong>Run and Debug</strong>","children":[{"content":"Test the system with various queries","children":[],"payload":{"lines":"93,94"}},{"content":"Update and refine based on feedback","children":[],"payload":{"lines":"94,95"}},{"content":"Code:<pre><code class=\"language-python\"><span class=\"hljs-keyword\">try</span>:\n    output = process_query(<span class=\"hljs-string\">\"debug test query\"</span>)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Output:\"</span>, output)\n<span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"Error during query processing:\"</span>, e)\n</code></pre>","children":[],"payload":{"lines":"95,103"}}],"payload":{"lines":"92,103"}}],"payload":{"lines":"1,2"}},{"htmlParser":{"selector":"h1,h2,h3,ul,ol,li,table,pre"},"initialExpandLevel":2})</script>
</body>
</html>
